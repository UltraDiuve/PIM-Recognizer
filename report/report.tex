\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[french]{babel}

\usepackage{lmodern}

\usepackage{setspace}
\spacing{1.5}
\usepackage[top=2.5cm, bottom=2.5cm, left=2.5cm, right=2.5cm]{geometry}
\usepackage{calc}

\usepackage{graphicx}

\usepackage{array,multirow,makecell,tabularx}
\renewcommand\tabularxcolumn[1]{>{\centering\arraybackslash}m{#1}}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}
\usepackage{booktabs}
\usepackage{floatrow}
% Table float box with bottom caption, box width adjusted to content
\newfloatcommand{capbtabbox}{table}[][\FBwidth]
\usepackage{rotating}
\usepackage{lscape}

\usepackage{pdfpages}

\usepackage{listings}
\usepackage{minted}

\usepackage{url}
\usepackage{hyperref}

\usepackage{titlesec} 
\titleclass{\part}{top} % changing part so that it does not take a full page.
\titleformat{\part}
    [display] % shape
    {\centering\normalfont\Huge\bfseries} % format
    {\MakeUppercase{\partname}\vspace{1pc}} % label
    {0pt} % set between label and title body
    {\titlerule[2pt]\vspace{1pc}\Huge\MakeUppercase} % before body
\titlespacing*{\part}
    {0pt} % left 
    {0pt} % before sep
    {10pt} % after sep

\titleclass{\chapter}{straight} % make chapter like a section (no newpage)
\titleformat{\chapter}
    [display] % shape
    {\centering\normalfont\huge\bfseries} % format
    {\chaptertitlename ~\thechapter} % label 
    {0pt} % sep between label and title body
    {\huge\MakeUppercase} % before body
\titlespacing*{\chapter}
    {0pt} % left
    {20pt} % before sep
    {20pt} % after sep

\usepackage{chngcntr}
\counterwithout{figure}{chapter}
\counterwithout{table}{chapter}
    

\newcommand{\emphbox}[1]{
    \vspace{5mm}
    \noindent\fbox{ 
        \begin{minipage}[c]{\linewidth}
            {\em #1}
        \end{minipage}
    }
}

\newcommand{\reffig}[1]{F\textsc{igure}~\ref{#1} page~\pageref{#1}}

\newcommand{\reftable}[1]{T\textsc{able}~\ref{#1} page~\pageref{#1}}

\newcommand{\mref}[1]{\ref{#1} page~\pageref{#1}}

\title{Extraction de données relatives aux produits alimentaires à partir de documents non structurés}
\author{Pierre \textsc{massé}}
\date{Juin 2020}

\begin{document}

\maketitle

\large
\begin{abstract}   
    
    La gestion de l'information produit est devenu un enjeu de société majeur ces dernières années.
    Les scandales sanitaires récents ont déclenché une prise de conscience collective des consommateurs, en parallèle de la mise en place de réglementations de plus en plus contraignantes pour l'ensemble des acteurs de la filière~\cite{incotext}\cite{incoexpl}.
    \`{A} ce titre, le Groupe Pomona a lancé ces dernières années un projet majeur de refonte des processus et des outils de gestion de l'information produit.

    La première filiale du Groupe a fait l'objet d'un déploiement réussi, mais cela a toutefois mis en évidence le fait que des gains à la fois en qualité et en productivité restent accessibles.

    La mise en place d'outils mettant en oeuvre les principes du Machine Learning appliqués au traitement du langage permettrait d'aider les opérationnels de la gestion de l'information à interpréter plus vite et mieux les documents mis à disposition par les fournisseurs du Groupe.

    Le présent rapport détaille la mise en place d'un outil permettant d'extraire les listes d'ingrédients des fiches techniques transmises par les fabricants des produits.
\end{abstract}
\normalsize

\tableofcontents

\input{business}

\input{data}

\input{objectifs}

\input{model}

\input{followup}

\appendix
\part{Annexes}
    \chapter{Figures, tableaux et bibliographie}
        \listoftables
        \listoffigures
        \bibliographystyle{plain}
        \bibliography{./biblio} 
    \chapter{Exemple de documents fournisseur}
        \section{Fiches techniques}
        \section{\'{E}tiquettes produit}
        \section{Fiches logistiques}
    \chapter{Le code utilisé}
        \includepdf[pages=-,
                    pagecommand={},
                    addtotoc={1,
                              section,
                              3,
                              Analyse quantitative,
                              code:analyse_quantitative}]
                    {notebooks/Analyse quantitative.pdf}

        \section{Gestion du fichier de configuration}
        Ce petit module a pour but de permettre de gérer les paramètres du progamme dans un fichier de configuration (afin de simplifier la maintenance).
        Il est utilisé dans l'ensemble des autres modules de ce projet.
        \inputminted[fontsize=\scriptsize]{python}{../src/conf.py}
        Un exemple de fichier de configuration (dont certains champs ont été anonymisés pour des raisons de confidentialité) est présenté ci-dessous.
        TODO !! Mettre le fichier ici.

        \section{Extraction des données du PIM}
            \inputminted[fontsize=\scriptsize]{python}{../src/pimapi.py}
        
        \section{Analyse des données du PIM}
        \includepdf[pages=-,
                    pagecommand={},
                    addtotoc={1,
                              section,
                              3,
                              Analyse des données du PIM,
                              code:analyse_donnees_PIM}]
                    {notebooks/Analyse donnees du PIM.pdf}

        \section{Conversion des pièces jointes en textes}
            \inputminted[fontsize=\scriptsize]{python}{../src/pimpdf.py}
        
        \section{Identification des listes d'ingrédients}
            \inputminted[fontsize=\scriptsize]{python}{../src/pimest.py} 
 
\end{document}